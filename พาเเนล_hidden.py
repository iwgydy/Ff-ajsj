
import base64
exec(base64.b64decode("aW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHNodXRpbAppbXBvcnQgcmVxdWVzdHMKZnJvbSB0cWRtIGltcG9ydCB0cWRtCmZyb20gY29sb3JhbWEgaW1wb3J0IGluaXQsIEZvcmUsIFN0eWxlCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQppbXBvcnQgcHl0egppbXBvcnQgdGltZQoKIyBJbml0aWFsaXplIGNvbG9yYW1hCmluaXQoYXV0b3Jlc2V0PVRydWUpCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyA9PT09PT09PT09PT0g4LiV4Lix4LmJ4LiH4LiE4LmI4Liy4LiV4Lix4Lin4LmB4Lib4Lij4Lir4Lil4Lix4LiBID09PT09PT09PT09PQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBGaXJlYmFzZSBSZWFsdGltZSBEYXRhYmFzZSBVUkwKIyAo4LmD4LiK4LmJ4Liq4Liz4Lir4Lij4Lix4Lia4LiV4Lij4Lin4LiI4Liq4Lit4Lia4LiE4Li14Lii4LmMKQpGSVJFQkFTRV9LRVlfVVJMID0gImh0dHBzOi8vZ29hay03MWFjOC1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb20va2V5cy5qc29uIgoKIyAo4LmD4LiK4LmJ4Liq4Liz4Lir4Lij4Lix4Lia4LiU4Li24LiH4Lij4Liy4Lii4LiB4Liy4Lij4LmE4Lif4Lil4LmM4LiX4Li14LmI4Lih4Li14LiX4Lix4LmJ4LiH4Lir4Lih4LiUKQpGSVJFQkFTRV9GSUxFU19VUkwgPSAiaHR0cHM6Ly9nb2FrLTcxYWM4LWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS9maWxlcy5qc29uIgoKIyDguYDguKrguYnguJnguJfguLLguIfguYTguJ/guKXguYzguKrguLPguKvguKPguLHguJrguKXguYfguK3guIEv4Lib4Lil4LiU4Lil4LmH4Lit4LiBCk9SSUdJTkFMX0ZJTEVfUEFUSCA9ICIvc3RvcmFnZS9lbXVsYXRlZC8wL0FuZHJvaWQvZGF0YS9jb20uZHRzLmZyZWVmaXJldGgvZmlsZXMvaWwyY3BwL01ldGFkYXRhL2dsb2JhbC1tZXRhZGF0YS5kYXQiCgojIOC5guC4n+C4peC5gOC4lOC4reC4o+C5jCBCYWNrdXAKQkFDS1VQX0RJUiA9ICIvc3RvcmFnZS9lbXVsYXRlZC8wL2JhY2t1cF9mcmVlZmlyZS8iCkJBQ0tVUF9GSUxFX1BBVEggPSBvcy5wYXRoLmpvaW4oQkFDS1VQX0RJUiwgImdsb2JhbC1tZXRhZGF0YS5kYXQiKQoKIyDguJXguLHguYnguIfguYLguIvguJnguYDguKfguKXguLLguYTguJfguKIKVEhBSUxBTkRfVElNRVpPTkUgPSBweXR6LnRpbWV6b25lKCdBc2lhL0Jhbmdrb2snKQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojID09PT09PT09PT09PSDguJ/guLHguIfguIHguYzguIrguLHguJnguIrguYjguKfguKLguYDguKvguKXguLfguK0gPT09PT09PT09PT09CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkZWYgY2xlYXJfc2NyZWVuKCk6CiAgICAiIiJDbGVhciB0aGUgdGVybWluYWwgc2NyZWVuLiIiIgogICAgb3Muc3lzdGVtKCdjbHMnIGlmIG9zLm5hbWUgPT0gJ250JyBlbHNlICdjbGVhcicpCgoKZGVmIHByaW50X2hlYWRlcihleHBpcmF0aW9uX2luZm89IiIpOgogICAgIiIiUHJpbnQgdGhlIGhlYWRlciBvZiB0aGUgcHJvZ3JhbSB3aXRoIGEgZmFuY3kgbG9vay4iIiIKICAgIGhlYWRlcl9hcnQgPSBmIiIiCntGb3JlLk1BR0VOVEF9e1N0eWxlLkJSSUdIVH0K4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXCuKVkSAgICAgIOKWiOKWiOKVl+KWkeKWkeKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKVl+KWkeKWkeKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVl+KWkeKWkeKWiOKWiOKVlyAgICAgICAgIOKVkQrilZEgICAgICDilojilojilZHilpHilojilojilZTilZ3ilojilojilZTilZDilZDilojilojilZfilojilojilojilojilZfilpHilojilojilZHilojilojilZTilZDilZDilZDilZDilZ3ilojilojilZHilpHilpHilojilojilZEgICAgICAgICDilZEK4pWRICAgICAg4paI4paI4paI4paI4paI4pWQ4pWd4paR4paI4paI4paI4paI4paI4paI4paI4pWR4paI4paI4pWU4paI4paI4pWX4paI4paI4pWR4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4paI4paI4paI4paI4paI4pWRICAgICAgICAg4pWRCuKVkSAgICAgIOKWiOKWiOKVlOKVkOKWiOKWiOKVl+KWkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWiOKWiOKVkeKVmuKWiOKWiOKWiOKWiOKVkeKWiOKWiOKVlOKVkOKVkOKVneKWkeKWkeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkSAgICAgICAgIOKVkQrilZEgICAgICDilojilojilZHilpHilZrilojilojilZfilojilojilZHilpHilpHilojilojilZHilojilojilZHilpHilZrilojilojilojilZHilojilojilojilojilojilojilojilZfilojilojilZHilpHilpHilojilojilZEgICAgICAgICDilZEK4pWRICAgICAg4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWdICAgICAgICAg4pWRCuKVoOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVowrilZEgICAgICAgICAgVklQIEZyZWUgRmlyZSBQYW5lbCBCWSBTT0RKS0UgICAgICAgICAgICAgICDilZEK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdCntleHBpcmF0aW9uX2luZm99CiIiIgogICAgcHJpbnQoaGVhZGVyX2FydCkKCgpkZWYgcHJpbnRfZm9vdGVyKCk6CiAgICAiIiJQcmludCB0aGUgZm9vdGVyIG9mIHRoZSBwcm9ncmFtIHdpdGggYSBuaWNlIGJvcmRlci4iIiIKICAgIGZvb3RlciA9IGYiIiIKe0ZvcmUuQ1lBTn17U3R5bGUuQlJJR0hUfQrilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcK4pWRICAgICAgICAgICAgICDguILguK3guJrguITguLjguJPguJfguLXguYjguYPguIrguYnguJrguKPguLTguIHguLLguKMg4p2k77iPICAgICAgICAgICAgICAgICAg4pWRCuKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnQoiIiIKICAgIHByaW50KGZvb3RlcikKCgpkZWYgcHJvbXB0X2NvbnRpbnVlKG1lc3NhZ2U9IuC4geC4lCBFbnRlciDguYDguJ7guLfguYjguK3guJTguLPguYDguJnguLTguJnguIHguLLguKPguJXguYjguK0uLi4iKToKICAgICIiIlByb21wdCB0aGUgdXNlciB0byBwcmVzcyBFbnRlciB0byBjb250aW51ZS4iIiIKICAgIGlucHV0KEZvcmUuWUVMTE9XICsgbWVzc2FnZSArIFN0eWxlLlJFU0VUX0FMTCkKCgpkZWYgZ2V0X2tleSgpOgogICAgIiIiUHJvbXB0IHRoZSB1c2VyIHRvIGVudGVyIHRoZSAyNi1jaGFyYWN0ZXIga2V5LiIiIgogICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAi8J+UkSDguIHguKPguLjguJPguLLguYPguKrguYjguITguLXguKLguYwgMjYg4Lir4Lil4Lix4LiBOiIpCiAgICB1c2VyX2tleSA9IGlucHV0KEZvcmUuR1JFRU4gKyAiPj4gIiArIFN0eWxlLlJFU0VUX0FMTCkKICAgIHJldHVybiB1c2VyX2tleQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojID09PT09PT09PT09PSDguJ/guLHguIfguIHguYzguIrguLHguJnguIjguLHguJTguIHguLLguKPguITguLXguKLguYwgPT09PT09PT09PT0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmRlZiBmZXRjaF92YWxpZF9rZXlzKCk6CiAgICAiIiJGZXRjaCBhbGwgdmFsaWQga2V5cyBmcm9tIEZpcmViYXNlIFJlYWx0aW1lIERhdGFiYXNlLiIiIgogICAgdHJ5OgogICAgICAgIHByaW50KEZvcmUuTUFHRU5UQSArICLwn5SNIOC4geC4s+C4peC4seC4h+C4leC4o+C4p+C4iOC4quC4reC4muC4hOC4teC4ouC5jOC4iOC4suC4geC5gOC4i+C4tOC4o+C5jOC4n+C5gOC4p+C4reC4o+C5jC4uLiIpCiAgICAgICAgdGltZS5zbGVlcCgwLjUpCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoRklSRUJBU0VfS0VZX1VSTCkKICAgICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgICBrZXlzX2RhdGEgPSByZXNwb25zZS5qc29uKCkKICAgICAgICBwcmludChGb3JlLkdSRUVOICsgIuKchSDguJXguKPguKfguIjguKrguK3guJrguITguLXguKLguYzguYDguKrguKPguYfguIjguKrguLTguYnguJkhIikKICAgICAgICB0aW1lLnNsZWVwKDAuOCkKICAgICAgICByZXR1cm4ga2V5c19kYXRhCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKaoO+4jyDguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJTguYPguJnguIHguLLguKPguJTguLbguIfguITguLXguKLguYzguIjguLLguIEgRmlyZWJhc2U6IHtlfSIpCiAgICAgICAgcHJvbXB0X2NvbnRpbnVlKCLguIHguJQgRW50ZXIg4LmA4Lie4Li34LmI4Lit4Lit4Lit4LiB4LiI4Liy4LiB4LmC4Lib4Lij4LmB4LiB4Lij4LihLi4uIikKICAgICAgICBzeXMuZXhpdCgpCgoKZGVmIHZhbGlkYXRlX2tleSh1c2VyX2tleSwga2V5c19kYXRhKToKICAgICIiIgogICAgVmFsaWRhdGUgdGhlIGVudGVyZWQga2V5IGFnYWluc3QgRmlyZWJhc2Uga2V5cyBhbmQgY2hlY2sgZXhwaXJhdGlvbi4KICAgIOC4luC5ieC4suC4hOC4teC4ouC5jOC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4h+C4q+C4o+C4t+C4reC4q+C4oeC4lOC4reC4suC4ouC4uCDguIjguLAgcmV0dXJuIE5vbmUKICAgIOC4luC5ieC4suC4hOC4teC4ouC5jOC4luC4ueC4geC4leC5ieC4reC4hyDguKLguLHguIfguYTguKHguYjguKvguKHguJTguK3guLLguKLguLgg4LiI4LiwIHJldHVybiAoZXhwaXJhdGlvbl90ZXh0LCBleHBpcmF0aW9uX2RhdGV0aW1lKQogICAgIiIiCiAgICBpZiBsZW4odXNlcl9rZXkpICE9IDI2OgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIuKdjCDguITguLXguKLguYzguYTguKHguYjguJbguLnguIHguJXguYnguK3guIchIOC4geC4o+C4uOC4k+C4suC5g+C4quC5iOC4hOC4teC4ouC5jCAyNiDguKvguKXguLHguIEuIikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybiBOb25lCgogICAga2V5X2luZm8gPSBrZXlzX2RhdGEuZ2V0KHVzZXJfa2V5KQogICAgaWYgbm90IGtleV9pbmZvOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIuKdjCDguITguLXguKLguYzguYTguKHguYjguJbguLnguIHguJXguYnguK3guIchIikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybiBOb25lCgogICAgZXhwaXJlc19hdF9zdHIgPSBrZXlfaW5mby5nZXQoImV4cGlyZXNfYXQiKQogICAgaWYgbm90IGV4cGlyZXNfYXRfc3RyOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIuKdjCDguILguYnguK3guKHguLnguKXguKfguLHguJnguKvguKHguJTguK3guLLguKLguLjguYTguKHguYjguJbguLnguIHguJXguYnguK3guIfguYPguJnguYDguIvguLTguKPguYzguJ/guYDguKfguK3guKPguYwhIikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybiBOb25lCgogICAgdHJ5OgogICAgICAgICMg4LmB4Lib4Lil4LiHIHN0cmluZyAtPiBkYXRldGltZSAoVVRDKQogICAgICAgIGV4cGlyZXNfYXRfdXRjID0gZGF0ZXRpbWUuZnJvbWlzb2Zvcm1hdChleHBpcmVzX2F0X3N0ci5yZXBsYWNlKCJaIiwgIiswMDowMCIpKQogICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAi4p2MIOC4o+C4ueC4m+C5geC4muC4muC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4h+C5g+C4meC5gOC4i+C4tOC4o+C5jOC4n+C5gOC4p+C4reC4o+C5jCEiKQogICAgICAgIHByb21wdF9jb250aW51ZSgpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAjIOC5geC4m+C4peC4h+C5gOC4p+C4peC4siBVVEMgLT4gVEgKICAgIGV4cGlyZXNfYXRfdGggPSBleHBpcmVzX2F0X3V0Yy5hc3RpbWV6b25lKFRIQUlMQU5EX1RJTUVaT05FKQogICAgY3VycmVudF90aW1lX3RoID0gZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YykuYXN0aW1lem9uZShUSEFJTEFORF9USU1FWk9ORSkKCiAgICBpZiBjdXJyZW50X3RpbWVfdGggPiBleHBpcmVzX2F0X3RoOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIuKPsCDguITguLXguKLguYzguKvguKHguJTguK3guLLguKLguLjguYHguKXguYnguKchIikKICAgICAgICAjIOC4peC4muC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4p+C4luC5ieC4suC4oeC4tQogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKE9SSUdJTkFMX0ZJTEVfUEFUSCk6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG9zLnJlbW92ZShPUklHSU5BTF9GSUxFX1BBVEgpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLllFTExPVyArICLwn5eR77iPIOC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4p+C4luC4ueC4geC4peC4muC4reC4reC4geC4reC4seC4leC5guC4meC4oeC4seC4leC4tOC5gOC4meC4t+C5iOC4reC4h+C4iOC4suC4geC4hOC4teC4ouC5jOC4q+C4oeC4lOC4reC4suC4ouC4uOC5geC4peC5ieC4pyIpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuUkVEICsgZiLinYwg4LmA4LiB4Li04LiU4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiU4LiC4LiT4Liw4Lil4Lia4LmE4Lif4Lil4LmMOiB7ZX0iKQogICAgICAgIHByb21wdF9jb250aW51ZSgi4LiB4LiUIEVudGVyIOC5gOC4nuC4t+C5iOC4reC5g+C4quC5iOC4hOC4teC4ouC5jOC5g+C4q+C4oeC5iC4uLiIpCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAjIOC4ouC4seC4h+C5hOC4oeC5iOC4q+C4oeC4lOC4reC4suC4ouC4uAogICAgZm9ybWF0dGVkX2V4cGlyZXNfYXQgPSBleHBpcmVzX2F0X3RoLnN0cmZ0aW1lKCclZC8lbS8lWSDguYDguKfguKXguLIgJUg6JU0g4LiZLicpCiAgICBleHBpcmF0aW9uX2luZm8gPSBmIntGb3JlLllFTExPV33wn5OFIOC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC4guC4reC4h+C4hOC4uOC4k+C4hOC4t+C4rSB7Zm9ybWF0dGVkX2V4cGlyZXNfYXR9XG4iCiAgICBwcmludChGb3JlLkdSRUVOICsgIuKchSDguITguLXguKLguYzguJbguLnguIHguJXguYnguK3guIchIikKICAgIHByaW50KGV4cGlyYXRpb25faW5mbykKICAgIHByb21wdF9jb250aW51ZSgi4LiB4LiUIEVudGVyIOC5gOC4nuC4t+C5iOC4reC5gOC4guC5ieC4suC4quC4ueC5iOC5gOC4oeC4meC4ueC4q+C4peC4seC4gS4uLiIpCiAgICByZXR1cm4gKGZvcm1hdHRlZF9leHBpcmVzX2F0LCBleHBpcmVzX2F0X3RoKQoKCmRlZiBjaGVja19rZXlfZXhwaXJlZChleHBpcmF0aW9uX2RhdGV0aW1lKToKICAgICIiIuC4leC4o+C4p+C4iOC4quC4reC4muC4p+C5iOC4suC4hOC4teC4ouC5jOC4q+C4oeC4lOC4reC4suC4ouC4uOC4q+C4o+C4t+C4reC4ouC4seC4hyIiIgogICAgY3VycmVudF90aW1lX3RoID0gZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YykuYXN0aW1lem9uZShUSEFJTEFORF9USU1FWk9ORSkKICAgIGlmIGN1cnJlbnRfdGltZV90aCA+IGV4cGlyYXRpb25fZGF0ZXRpbWU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAi4o+wIOC4hOC4teC4ouC5jOC4q+C4oeC4lOC4reC4suC4ouC4uOC5geC4peC5ieC4pyEiKQogICAgICAgICMg4Lil4Lia4LmE4Lif4Lil4LmM4Lil4LmH4Lit4LiB4Lir4Lix4Lin4LiW4LmJ4Liy4Lih4Li1CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoT1JJR0lOQUxfRklMRV9QQVRIKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgb3MucmVtb3ZlKE9SSUdJTkFMX0ZJTEVfUEFUSCkKICAgICAgICAgICAgICAgIHByaW50KEZvcmUuWUVMTE9XICsgIvCfl5HvuI8g4LmE4Lif4Lil4LmM4Lil4LmH4Lit4LiB4Lir4Lix4Lin4LiW4Li54LiB4Lil4Lia4Lit4Lit4LiB4Lit4Lix4LiV4LmC4LiZ4Lih4Lix4LiV4Li04LmA4LiZ4Li34LmI4Lit4LiH4LiI4Liy4LiB4LiE4Li14Lii4LmM4Lir4Lih4LiU4Lit4Liy4Lii4Li44LmB4Lil4LmJ4LinIikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKdjCDguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJTguILguJPguLDguKXguJrguYTguJ/guKXguYw6IHtlfSIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIHJldHVybiBGYWxzZQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojID09PT09PT09PT0g4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Lib4Li04LiUL+C5gOC4m+C4tOC4lOC4peC5h+C4reC4gSAgPT09PT09PT09CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkZWYgbG9ja19maWxlKGV4cGlyYXRpb25fZGF0ZXRpbWUpOgogICAgIiIiTG9jayB0aGUgZmlsZSBieSBtb3ZpbmcgaXQgdG8gdGhlIGJhY2t1cCBkaXJlY3RvcnkuIiIiCiAgICBpZiBjaGVja19rZXlfZXhwaXJlZChleHBpcmF0aW9uX2RhdGV0aW1lKToKICAgICAgICBwcmludChGb3JlLlJFRCArICLwn5qrIOC4hOC4teC4ouC5jOC4guC4reC4h+C4hOC4uOC4k+C4q+C4oeC4lOC4reC4suC4ouC4uCDguYTguKHguYjguKrguLLguKHguLLguKPguJbguKXguYfguK3guIHguYTguJ/guKXguYzguYTguJTguYkiKQogICAgICAgIHByb21wdF9jb250aW51ZSgi4LiB4LiUIEVudGVyIOC5gOC4nuC4t+C5iOC4reC4geC4peC4seC4muC4quC4ueC5iOC5gOC4oeC4meC4ueC5g+C4quC5iOC4hOC4teC4ouC5jOC5g+C4q+C4oeC5iC4uLiIpCiAgICAgICAgcmV0dXJuICJFWFBJUkVEIgoKICAgIHByaW50KEZvcmUuQkxVRSArICJcbvCflJIg4LiB4Liz4Lil4Lix4LiH4Lib4Li04LiU4LmE4Lif4Lil4LmM4Lil4LmH4Lit4LiB4Lir4Lix4LinLi4uIikKICAgIHRpbWUuc2xlZXAoMC41KQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKE9SSUdJTkFMX0ZJTEVfUEFUSCk6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAi4p2MIOC5hOC4oeC5iOC4nuC4muC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4p+C4l+C4teC5iOC4leC5ieC4reC4h+C4geC4suC4o+C4m+C4tOC4lCIpCiAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAi8J+TjCDguIHguKPguLjguJPguLLguYPguIrguYnguYDguKHguJnguLkgWzIuIOC5gOC4m+C4tOC4lOC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4p10g4LiB4LmI4Lit4LiZICjguKvguLLguIHguYDguITguKLguJvguLTguJTguYTguKfguYnguYHguKXguYnguKcpIikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybgoKICAgIHRyeToKICAgICAgICBvcy5tYWtlZGlycyhCQUNLVVBfRElSLCBleGlzdF9vaz1UcnVlKQogICAgICAgIHNodXRpbC5tb3ZlKE9SSUdJTkFMX0ZJTEVfUEFUSCwgQkFDS1VQX0ZJTEVfUEFUSCkKICAgICAgICBwcmludChGb3JlLkdSRUVOICsgZiLinIUge1N0eWxlLkJSSUdIVH3guJvguLTguJTguYTguJ/guKXguYzguKXguYfguK3guIHguKvguLHguKfguYDguKPguLXguKLguJrguKPguYnguK3guKJ7U3R5bGUuUkVTRVRfQUxMfSIpCiAgICBleGNlcHQgUGVybWlzc2lvbkVycm9yOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgZiLinYwg4LmE4Lih4LmI4Lih4Li14Liq4Li04LiX4LiY4Li04LmM4Lii4LmJ4Liy4Lii4LmE4Lif4Lil4LmMOiB7T1JJR0lOQUxfRklMRV9QQVRIfS4g4LmC4Lib4Lij4LiU4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Liq4Li04LiX4LiY4Li04LmMLiIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKdjCDguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJQ6IHtlfSIpCiAgICBwcm9tcHRfY29udGludWUoKQoKCmRlZiB1bmxvY2tfZmlsZShleHBpcmF0aW9uX2RhdGV0aW1lKToKICAgICIiIlVubG9jayB0aGUgZmlsZSBieSBtb3ZpbmcgaXQgYmFjayBmcm9tIHRoZSBiYWNrdXAgZGlyZWN0b3J5LiIiIgogICAgaWYgY2hlY2tfa2V5X2V4cGlyZWQoZXhwaXJhdGlvbl9kYXRldGltZSk6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAi8J+aqyDguITguLXguKLguYzguILguK3guIfguITguLjguJPguKvguKHguJTguK3guLLguKLguLgg4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4Lib4Lil4LiU4Lil4LmH4Lit4LiB4LmE4Lif4Lil4LmM4LmE4LiU4LmJIikKICAgICAgICBwcm9tcHRfY29udGludWUoIuC4geC4lCBFbnRlciDguYDguJ7guLfguYjguK3guIHguKXguLHguJrguKrguLnguYjguYDguKHguJnguLnguYPguKrguYjguITguLXguKLguYzguYPguKvguKHguYguLi4iKQogICAgICAgIHJldHVybiAiRVhQSVJFRCIKCiAgICBwcmludChGb3JlLkJMVUUgKyAiXG7wn5STIOC4geC4s+C4peC4seC4h+C5gOC4m+C4tOC4lOC4peC5h+C4reC4geC5hOC4n+C4peC5jOC4q+C4seC4py4uLiIpCiAgICB0aW1lLnNsZWVwKDAuNSkKICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhCQUNLVVBfRklMRV9QQVRIKToKICAgICAgICBwcmludChGb3JlLlJFRCArICLinYwg4LmE4Lih4LmI4Lih4Li14LmE4Lif4Lil4LmM4Lil4LmH4Lit4LiB4Lir4Lix4Lin4LmD4LiZ4LmC4Lif4Lil4LmA4LiU4Lit4Lij4LmMIEJhY2t1cCDguYDguJ7guLfguYjguK3guYDguJvguLTguJQiKQogICAgICAgIHByb21wdF9jb250aW51ZSgpCiAgICAgICAgcmV0dXJuCgogICAgdHJ5OgogICAgICAgICMg4Lil4Lia4LmE4Lif4Lil4LmM4LmA4LiU4Li04Lih4LiW4LmJ4Liy4Lih4Li1CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoT1JJR0lOQUxfRklMRV9QQVRIKToKICAgICAgICAgICAgb3MucmVtb3ZlKE9SSUdJTkFMX0ZJTEVfUEFUSCkKICAgICAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyAi8J+Xke+4jyDguYTguJ/guKXguYzguYDguIHguYjguLLguYPguJnguJvguKXguLLguKLguJfguLLguIfguJbguLnguIHguKXguJrguK3guK3guIHguYDguKPguLXguKLguJrguKPguYnguK3guKLguYHguKXguYnguKciKQoKICAgICAgICBvcy5tYWtlZGlycyhvcy5wYXRoLmRpcm5hbWUoT1JJR0lOQUxfRklMRV9QQVRIKSwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICBzaHV0aWwubW92ZShCQUNLVVBfRklMRV9QQVRILCBPUklHSU5BTF9GSUxFX1BBVEgpCiAgICAgICAgcHJpbnQoRm9yZS5HUkVFTiArIGYi4pyFIHtTdHlsZS5CUklHSFR94LmA4Lib4Li04LiU4LmE4Lif4Lil4LmM4Lil4LmH4Lit4LiB4Lir4Lix4Lin4LmA4Lij4Li14Lii4Lia4Lij4LmJ4Lit4Liie1N0eWxlLlJFU0VUX0FMTH0iKQogICAgZXhjZXB0IFBlcm1pc3Npb25FcnJvcjoKICAgICAgICBwcmludChGb3JlLlJFRCArIGYi4p2MIOC5hOC4oeC5iOC4oeC4teC4quC4tOC4l+C4mOC4tOC5jOC4iOC4seC4lOC4geC4suC4o+C5hOC4n+C4peC5jDoge09SSUdJTkFMX0ZJTEVfUEFUSH0uIOC5guC4m+C4o+C4lOC4leC4o+C4p+C4iOC4quC4reC4muC4quC4tOC4l+C4mOC4tOC5jC4iKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgZiLinYwg4LmA4LiB4Li04LiU4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiUOiB7ZX0iKQogICAgcHJvbXB0X2NvbnRpbnVlKCkKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyA9PT09PT09PT09PSDguJ/guLHguIfguIHguYzguIrguLHguJnguJTguLLguKfguJnguYzguYLguKvguKXguJTguYTguJ/guKXguYwgPT09PT09PT09CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkZWYgZG93bmxvYWRfZmlsZXMoZXhwaXJhdGlvbl9kYXRldGltZSk6CiAgICAiIiIKICAgIOC4lOC4tuC4h+C4o+C4suC4ouC4iuC4t+C5iOC4reC5hOC4n+C4peC5jOC4iOC4suC4gSBGaXJlYmFzZSDguYHguKXguYnguKfguYPguKvguYnguJzguLnguYnguYPguIrguYnguYDguKXguLfguK3guIHguKfguYjguLLguIjguLDguJTguLLguKfguJnguYzguYLguKvguKXguJTguYTguJ/guKXguYzguYTguKvguJkKICAgIOC5hOC4n+C4peC5jOC4iOC4sOC4luC4ueC4geC5gOC4geC5h+C4muC4peC4h+C5g+C4mSBCQUNLVVBfRElSIOC4leC4suC4oeC4iuC4t+C5iOC4reC5hOC4n+C4peC5jOC4l+C4teC5iOC4leC4seC5ieC4h+C5g+C4mSBGaXJlYmFzZQogICAg4Lir4Lil4Lix4LiH4LiI4Liy4LiB4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiU4LiI4Liw4Liq4LmI4LiH4LmE4Lif4Lil4LmM4LmE4Lib4Lii4Lix4LiH4Lif4Lix4LiH4LiB4LmM4LiK4Lix4LiZ4Lib4Lil4LiU4Lil4LmH4Lit4LiB4LmE4Lif4Lil4LmM4LmB4Lil4Liw4LmB4LiX4LiZ4LiX4Li14LmI4LmE4Lif4Lil4LmM4LiX4Li14LmI4Lih4Li14Lit4Lii4Li54LmI4LmB4Lil4LmJ4Lin4LiW4LmJ4Liy4Lih4Li1CiAgICAiIiIKICAgIGlmIGNoZWNrX2tleV9leHBpcmVkKGV4cGlyYXRpb25fZGF0ZXRpbWUpOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIvCfmqsg4LiE4Li14Lii4LmM4LiC4Lit4LiH4LiE4Li44LiT4Lir4Lih4LiU4Lit4Liy4Lii4Li4IOC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lOC5hOC4lOC5iSIpCiAgICAgICAgcHJvbXB0X2NvbnRpbnVlKCLguIHguJQgRW50ZXIg4LmA4Lie4Li34LmI4Lit4LiB4Lil4Lix4Lia4Liq4Li54LmI4LmA4Lih4LiZ4Li54LmD4Liq4LmI4LiE4Li14Lii4LmM4LmD4Lir4Lih4LmILi4uIikKICAgICAgICByZXR1cm4gIkVYUElSRUQiCgogICAgcHJpbnQoRm9yZS5CTFVFICsgIlxu8J+UvSDguIHguLPguKXguLHguIfguJTguLbguIfguKPguLLguKLguIHguLLguKPguYTguJ/guKXguYzguIjguLLguIEgRmlyZWJhc2UuLi4iKQogICAgdGltZS5zbGVlcCgwLjUpCiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoRklSRUJBU0VfRklMRVNfVVJMKQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICAgIGZpbGVzX2RhdGEgPSByZXNwb25zZS5qc29uKCkKICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChGb3JlLlJFRCArIGYi4p2MIOC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC4lOC4tuC4h+C4o+C4suC4ouC4geC4suC4o+C5hOC4n+C4peC5jOC5hOC4lOC5iToge2V9IikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybgoKICAgIGlmIG5vdCBmaWxlc19kYXRhOgogICAgICAgIHByaW50KEZvcmUuUkVEICsgIuKdjCDguKLguLHguIfguYTguKHguYjguKHguLXguYTguJ/guKXguYzguYPguKvguYnguJTguLLguKfguJnguYzguYLguKvguKXguJQgKGZpbGVzLyDguKLguLHguIfguKfguYjguLLguIcpIikKICAgICAgICBwcm9tcHRfY29udGludWUoKQogICAgICAgIHJldHVybgoKICAgICMg4Liq4Lij4LmJ4Liy4LiH4Lil4Li04Liq4LiV4LmMIChpZCwgbmFtZSwgdXJsKQogICAgZmlsZV9saXN0ID0gW10KICAgIGZvciBmaWxlX2lkLCBpbmZvIGluIGZpbGVzX2RhdGEuaXRlbXMoKToKICAgICAgICBuYW1lID0gaW5mby5nZXQoJ25hbWUnLCBmIlVubmFtZWQte2ZpbGVfaWR9IikKICAgICAgICB1cmwgPSBpbmZvLmdldCgndXJsJywgTm9uZSkKICAgICAgICBpZiB1cmw6CiAgICAgICAgICAgIGZpbGVfbGlzdC5hcHBlbmQoKGZpbGVfaWQsIG5hbWUsIHVybCkpCgogICAgaWYgbm90IGZpbGVfbGlzdDoKICAgICAgICBwcmludChGb3JlLlJFRCArICLinYwg4LmE4Lih4LmI4Lie4Lia4Lia4Lix4LiZ4LiX4Li24LiB4LmE4Lif4Lil4LmM4LiX4Li14LmI4Lih4Li1IFVSTCDguYPguJkgRmlyZWJhc2UiKQogICAgICAgIHByb21wdF9jb250aW51ZSgpCiAgICAgICAgcmV0dXJuCgogICAgIyDguYHguKrguJTguIfguKXguLTguKrguJXguYzguYTguJ/guKXguYzguYPguKvguYnguJzguLnguYnguYPguIrguYkKICAgIHByaW50KGYie0ZvcmUuTUFHRU5UQX1cbvCfk5wg4Lij4Liy4Lii4LiB4Liy4Lij4LmE4Lif4Lil4LmM4LiX4Li14LmI4Lih4Li14LmD4Lir4LmJ4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiUOiIpCiAgICBmb3IgaSwgKGZpbGVfaWQsIG5hbWUsIHVybCkgaW4gZW51bWVyYXRlKGZpbGVfbGlzdCwgc3RhcnQ9MSk6CiAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyBmIntpfSkge25hbWV9IikKCiAgICBjaG9pY2UgPSBpbnB1dChGb3JlLkdSRUVOICsgIlxu4Lie4Li04Lih4Lie4LmM4LmA4Lil4LiC4LmE4Lif4Lil4LmM4LiX4Li14LmI4LiV4LmJ4Lit4LiH4LiB4Liy4Lij4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiUOiAiICsgU3R5bGUuUkVTRVRfQUxMKQogICAgaWYgbm90IGNob2ljZS5pc2RpZ2l0KCk6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyAi4p2MIOC4geC4o+C4uOC4k+C4suC5g+C4quC5iOC4leC4seC4p+C5gOC4peC4guC5gOC4l+C5iOC4suC4meC4seC5ieC4mS4iKQogICAgICAgIHByb21wdF9jb250aW51ZSgpCiAgICAgICAgcmV0dXJuCgogICAgY2hvaWNlX2luZGV4ID0gaW50KGNob2ljZSkgLSAxCiAgICBpZiBjaG9pY2VfaW5kZXggPCAwIG9yIGNob2ljZV9pbmRleCA+PSBsZW4oZmlsZV9saXN0KToKICAgICAgICBwcmludChGb3JlLlJFRCArICLinYwg4LiV4Lix4Lin4LmA4Lil4Li34Lit4LiB4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHLiIpCiAgICAgICAgcHJvbXB0X2NvbnRpbnVlKCkKICAgICAgICByZXR1cm4KCiAgICBzZWxlY3RlZF9maWxlID0gZmlsZV9saXN0W2Nob2ljZV9pbmRleF0KICAgIF8sIHNlbGVjdGVkX25hbWUsIHNlbGVjdGVkX3VybCA9IHNlbGVjdGVkX2ZpbGUKCiAgICAjIOC5gOC4o+C4tOC5iOC4oeC4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lAogICAgcHJpbnQoRm9yZS5CTFVFICsgZiJcbuKsh++4jyDguIHguLPguKXguLHguIfguJTguLLguKfguJnguYzguYLguKvguKXguJQ6IHtzZWxlY3RlZF9uYW1lfSIpCiAgICB0aW1lLnNsZWVwKDAuNSkKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldChzZWxlY3RlZF91cmwsIHN0cmVhbT1UcnVlKQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQoKICAgICAgICB0b3RhbF9zaXplX2luX2J5dGVzID0gaW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LWxlbmd0aCcsIDApKQogICAgICAgIGJsb2NrX3NpemUgPSAxMDI0ICAjIDEgS2lCCgogICAgICAgIG9zLm1ha2VkaXJzKEJBQ0tVUF9ESVIsIGV4aXN0X29rPVRydWUpCgogICAgICAgICMg4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Lin4LmI4Liy4LiK4Li34LmI4Lit4LmE4Lif4Lil4LmM4LiV4Lij4LiH4LiB4Lix4Lia4LmE4Lif4Lil4LmM4LiX4Li14LmI4LiV4LmJ4Lit4LiH4LiB4Liy4Lij4LmB4LiX4LiZ4LiX4Li14LmI4Lir4Lij4Li34Lit4LmE4Lih4LmICiAgICAgICAgaWYgc2VsZWN0ZWRfbmFtZSA9PSAiZ2xvYmFsLW1ldGFkYXRhLmRhdCI6CiAgICAgICAgICAgIGZpbGVfcGF0aCA9IEJBQ0tVUF9GSUxFX1BBVEgKICAgICAgICBlbHNlOgogICAgICAgICAgICAjIOC4q+C4suC4geC5hOC4n+C4peC5jOC4l+C4teC5iOC4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lOC5hOC4oeC5iOC5g+C4iuC5iCBnbG9iYWwtbWV0YWRhdGEuZGF0IOC5g+C4q+C5ieC5gOC4geC5h+C4muC5hOC4p+C5ieC5g+C4meC5guC4n+C4peC5gOC4lOC4reC4o+C5jCBCYWNrdXAKICAgICAgICAgICAgc2FmZV9maWxlbmFtZSA9ICIiLmpvaW4oYyBmb3IgYyBpbiBzZWxlY3RlZF9uYW1lIGlmIGMuaXNhbG51bSgpIG9yIGMgaW4gIi5fLSAiKQogICAgICAgICAgICBmaWxlX3BhdGggPSBvcy5wYXRoLmpvaW4oQkFDS1VQX0RJUiwgc2FmZV9maWxlbmFtZSArICIuYmluIikKCiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3diJykgYXMgZmlsZSwgdHFkbSgKICAgICAgICAgICAgZGVzYz1mIntGb3JlLllFTExPV33irIfvuI8g4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiUIiwKICAgICAgICAgICAgdG90YWw9dG90YWxfc2l6ZV9pbl9ieXRlcywKICAgICAgICAgICAgdW5pdD0naUInLAogICAgICAgICAgICB1bml0X3NjYWxlPVRydWUsCiAgICAgICAgICAgIHVuaXRfZGl2aXNvcj0xMDI0LAogICAgICAgICAgICBiYXJfZm9ybWF0PSd7bF9iYXJ9e2Jhcn0gfCB7cGVyY2VudGFnZTouMmZ9JSB8IHtyYXRlX2ZtdH0gfCB7ZWxhcHNlZH0gZWxhcHNlZCcsCiAgICAgICAgICAgIG5jb2xzPTcwCiAgICAgICAgKSBhcyBwcm9ncmVzc19iYXI6CiAgICAgICAgICAgIGZvciBkYXRhIGluIHJlc3BvbnNlLml0ZXJfY29udGVudChibG9ja19zaXplKToKICAgICAgICAgICAgICAgIHByb2dyZXNzX2Jhci51cGRhdGUobGVuKGRhdGEpKQogICAgICAgICAgICAgICAgZmlsZS53cml0ZShkYXRhKQoKICAgICAgICBwcmludChGb3JlLkdSRUVOICsgZiJcbuKchSDguJTguLLguKfguJnguYzguYLguKvguKXguJTguYTguJ/guKXguYwgJ3tzZWxlY3RlZF9uYW1lfScg4Liq4Liz4LmA4Lij4LmH4LiIISIpCiAgICAgICAgcHJpbnQoRm9yZS5ZRUxMT1cgKyBmIuC5hOC4n+C4peC5jOC4luC4ueC4geC5gOC4geC5h+C4muC5g+C4mToge2ZpbGVfcGF0aH0iKQoKICAgICAgICAjIOC4luC5ieC4suC5gOC4m+C5h+C4meC5hOC4n+C4peC5jCBnbG9iYWwtbWV0YWRhdGEuZGF0IOC5g+C4q+C5ieC5gOC4o+C4teC4ouC4geC5g+C4iuC5ieC4n+C4seC4h+C4geC5jOC4iuC4seC4meC4m+C4peC4lOC4peC5h+C4reC4gQogICAgICAgIGlmIHNlbGVjdGVkX25hbWUgPT0gImdsb2JhbC1tZXRhZGF0YS5kYXQiOgogICAgICAgICAgICBwcmludChGb3JlLkJMVUUgKyAiXG7wn5SEIOC4geC4s+C4peC4seC4h+C5geC4l+C4meC4l+C4teC5iOC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4p+C5gOC4lOC4tOC4oeC4lOC5ieC4p+C4ouC5hOC4n+C4peC5jOC4l+C4teC5iOC4lOC4suC4p+C4meC5jOC5guC4q+C4peC4lOC5g+C4q+C4oeC5iC4uLiIpCiAgICAgICAgICAgIHJlc3VsdCA9IHVubG9ja19maWxlKGV4cGlyYXRpb25fZGF0ZXRpbWUpCiAgICAgICAgICAgIGlmIHJlc3VsdCA9PSAiRVhQSVJFRCI6CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChGb3JlLllFTExPVyArICLimqDvuI8g4LmE4Lif4Lil4LmM4LiX4Li14LmI4LiU4Liy4Lin4LiZ4LmM4LmC4Lir4Lil4LiU4LmE4Lih4LmI4LmD4LiK4LmIICdnbG9iYWwtbWV0YWRhdGEuZGF0JyDguJTguLHguIfguJnguLHguYnguJnguIjguLbguIfguYTguKHguYjguYTguJTguYnguJbguLnguIHguKrguYjguIfguYTguJvguKLguLHguIfguJ/guLHguIfguIHguYzguIrguLHguJnguJvguKXguJTguKXguYfguK3guIEuIikKCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKdjCDguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJTguILguJPguLDguJTguLLguKfguJnguYzguYLguKvguKXguJQ6IHtlfSIpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoRm9yZS5SRUQgKyBmIuKdjCDguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJQ6IHtlfSIpCgogICAgcHJvbXB0X2NvbnRpbnVlKCkKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyA9PT09PT09PT09PT09PT09IE1haW4gTWVudSA9PT09PT09PT09PT09PT09CiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpkZWYgbWFpbl9tZW51KCk6CiAgICAiIiJEaXNwbGF5IHRoZSBtYWluIG1lbnUgb3B0aW9ucy4iIiIKICAgIG1lbnUgPSBmIiIiCntGb3JlLk1BR0VOVEF9e1N0eWxlLkJSSUdIVH3guIHguKPguLjguJPguLLguYDguKXguLfguK3guIHguJXguLHguKfguYDguKXguLfguK3guIE6CntGb3JlLllFTExPV30gIDEue1N0eWxlLlJFU0VUX0FMTH0g8J+UkiDguJvguLTguJTguYTguJ/guKXguYzguKXguYfguK3guIHguKvguLHguKcKe0ZvcmUuWUVMTE9XfSAgMi57U3R5bGUuUkVTRVRfQUxMfSDwn5STIOC5gOC4m+C4tOC4lOC5hOC4n+C4peC5jOC4peC5h+C4reC4geC4q+C4seC4pwp7Rm9yZS5ZRUxMT1d9ICAzLntTdHlsZS5SRVNFVF9BTEx9IOKsh++4jyDguJTguLLguKfguJnguYzguYLguKvguKXguJTguYTguJ/guKXguYzguJTguLnguJTguKvguLHguKcg4Lit4Lix4Lie4LmA4LiU4LiX4LiX4Li44LiB4Lin4Lix4LiZCntGb3JlLllFTExPV30gIDQue1N0eWxlLlJFU0VUX0FMTH0g4p2MIOC4reC4reC4geC4iOC4suC4geC5guC4m+C4o+C5geC4geC4o+C4oQoiIiIKICAgIHByaW50KG1lbnUpCgoKZGVmIG1haW4oKToKICAgICIiIk1haW4gZnVuY3Rpb24gdG8gcnVuIHRoZSBwcm9ncmFtLiIiIgogICAgd2hpbGUgVHJ1ZToKICAgICAgICBjbGVhcl9zY3JlZW4oKQogICAgICAgIHByaW50X2hlYWRlcigpCiAgICAgICAgdXNlcl9rZXkgPSBnZXRfa2V5KCkKICAgICAgICBrZXlzX2RhdGEgPSBmZXRjaF92YWxpZF9rZXlzKCkKICAgICAgICB2YWxpZF9yZXN1bHQgPSB2YWxpZGF0ZV9rZXkodXNlcl9rZXksIGtleXNfZGF0YSkKCiAgICAgICAgIyDguJbguYnguLLguITguLXguKLguYzguJzguLTguJQv4Lir4Lih4LiU4Lit4Liy4Lii4Li4IOC4iOC4sOC4geC4peC4seC4muC4oeC4siBsb29wIOC5g+C4q+C5ieC5g+C4quC5iOC5g+C4q+C4oeC5iAogICAgICAgIGlmIG5vdCB2YWxpZF9yZXN1bHQ6CiAgICAgICAgICAgIGNsZWFyX3NjcmVlbigpCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMg4LiW4LmJ4Liy4LiE4Li14Lii4LmM4LiW4Li54LiB4LiV4LmJ4Lit4LiHCiAgICAgICAgZXhwaXJhdGlvbl90ZXh0LCBleHBpcmF0aW9uX2RhdGV0aW1lID0gdmFsaWRfcmVzdWx0CgogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGNsZWFyX3NjcmVlbigpCiAgICAgICAgICAgIHByaW50X2hlYWRlcihmIntGb3JlLllFTExPV33wn5OFIOC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC4guC4reC4h+C4hOC4uOC4k+C4hOC4t+C4rSB7ZXhwaXJhdGlvbl90ZXh0fSIpCiAgICAgICAgICAgIG1haW5fbWVudSgpCiAgICAgICAgICAgIGNob2ljZSA9IGlucHV0KEZvcmUuR1JFRU4gKyAiPj4gIiArIFN0eWxlLlJFU0VUX0FMTCkKCiAgICAgICAgICAgIGlmIGNob2ljZSA9PSAiMSI6CiAgICAgICAgICAgICAgICBjbGVhcl9zY3JlZW4oKQogICAgICAgICAgICAgICAgcHJpbnRfaGVhZGVyKGYie0ZvcmUuWUVMTE9XffCfk4Ug4Lin4Lix4LiZ4Lir4Lih4LiU4Lit4Liy4Lii4Li44LiC4Lit4LiH4LiE4Li44LiT4LiE4Li34LitIHtleHBpcmF0aW9uX3RleHR9IikKICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxvY2tfZmlsZShleHBpcmF0aW9uX2RhdGV0aW1lKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09ICJFWFBJUkVEIjoKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjIiOgogICAgICAgICAgICAgICAgY2xlYXJfc2NyZWVuKCkKICAgICAgICAgICAgICAgIHByaW50X2hlYWRlcihmIntGb3JlLllFTExPV33wn5OFIOC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC4guC4reC4h+C4hOC4uOC4k+C4hOC4t+C4rSB7ZXhwaXJhdGlvbl90ZXh0fSIpCiAgICAgICAgICAgICAgICByZXN1bHQgPSB1bmxvY2tfZmlsZShleHBpcmF0aW9uX2RhdGV0aW1lKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09ICJFWFBJUkVEIjoKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjMiOgogICAgICAgICAgICAgICAgY2xlYXJfc2NyZWVuKCkKICAgICAgICAgICAgICAgIHByaW50X2hlYWRlcihmIntGb3JlLllFTExPV33wn5OFIOC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC4guC4reC4h+C4hOC4uOC4k+C4hOC4t+C4rSB7ZXhwaXJhdGlvbl90ZXh0fSIpCiAgICAgICAgICAgICAgICByZXN1bHQgPSBkb3dubG9hZF9maWxlcyhleHBpcmF0aW9uX2RhdGV0aW1lKQogICAgICAgICAgICAgICAgaWYgcmVzdWx0ID09ICJFWFBJUkVEIjoKICAgICAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgZWxpZiBjaG9pY2UgPT0gIjQiOgogICAgICAgICAgICAgICAgY2xlYXJfc2NyZWVuKCkKICAgICAgICAgICAgICAgIHByaW50X2hlYWRlcihmIntGb3JlLllFTExPV33wn5OFIOC4p+C4seC4meC4q+C4oeC4lOC4reC4suC4ouC4uOC4guC4reC4h+C4hOC4uOC4k+C4hOC4t+C4rSB7ZXhwaXJhdGlvbl90ZXh0fSIpCiAgICAgICAgICAgICAgICBwcmludChGb3JlLkNZQU4gKyAi8J+aqiDguIHguLPguKXguLHguIfguK3guK3guIHguIjguLLguIHguYLguJvguKPguYHguIHguKPguKEuLi4iKQogICAgICAgICAgICAgICAgcHJpbnRfZm9vdGVyKCkKICAgICAgICAgICAgICAgIHN5cy5leGl0KCkKCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChGb3JlLlJFRCArICLinYwg4LiV4Lix4Lin4LmA4Lil4Li34Lit4LiB4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHIOC4geC4o+C4uOC4k+C4suC5gOC4peC4t+C4reC4geC5g+C4q+C4oeC5iC4iKQogICAgICAgICAgICAgICAgcHJvbXB0X2NvbnRpbnVlKCkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgdHJ5OgogICAgICAgIG1haW4oKQogICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgIGNsZWFyX3NjcmVlbigpCiAgICAgICAgcHJpbnQoRm9yZS5DWUFOICsgIlxu8J+bkSDguYLguJvguKPguYHguIHguKPguKHguJbguLnguIHguKLguIHguYDguKXguLTguIHguYLguJTguKLguJzguLnguYnguYPguIrguYkuIikKICAgICAgICBwcmludF9mb290ZXIoKQogICAgICAgIHN5cy5leGl0KCk=").decode("utf-8"))
